<p id="notice"><%= notice %></p>

<h1>Bulletin board</h1>

<table style="width:500px">
  <thead>
    <tr>
      <th>Index </th>
      <th>Big ri </th>
      <th>Big zi </th>
      <th>Pwf </th>
      <th>Status </th>
      <th>User </th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% p = 11 %>
    <% q = 5 %>
    <% g = 7 %>
    <% g_2 = 5 %>
    <% big_ri_product = 1 %>
    <% big_zi_product = 1 %>
    <% @votes.each do |vote| %>
      <tr>
        <td><%= vote.id %></td>
        <td><%= vote.big_ri %></td>
        <td><%= vote.big_zi %></td>
        <td><%= vote.pwf %></td>
        <td><%= vote.status %></td>
        <td><%= vote.user_id %></td>
        <td><%= link_to 'Show', vote %></td>
        <td><%= link_to 'Destroy', vote, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% big_ri_product =  big_ri_product * vote.big_ri %>
        <% big_zi_product =  big_zi_product * vote.big_zi %>
      </tr>
    <% end %>
    <% f = File.open("total_random", "r") %>
    <% f2 = File.open("total_votes", "r") %>
    <% s = f.read.to_i %>
    <% t = f2.read.to_i %>
    <% f.close() %>
    <% f2.close() %>
    <% if (((big_ri_product % p) == ((g_2 ** s) % p)) && ((big_zi_product % p) == (((g ** s) % p) * ((g ** t) % p)) % p)) %>  
      <%= 'Tally verification successful' %>
    <% else %> 
      <%= 'Tally verification unsuccessful' %>
    <% end %>
  </tbody>
</table>

<br>
<p><%= 'g is ' + g.to_s %></p>
<p><%= 'g_2 is ' + g_2.to_s %></p>
<p><%= 'Total sum of votes is (not count of individuals) ' + t.to_s %></p>
<p><%= 'Total of random numbers is ' + s.to_s %></p>
<p><%= link_to 'New Vote', new_vote_path %></p>
